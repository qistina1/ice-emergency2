const translations = {
    en: {
        title: "ğŸ†˜ ICE - Malaysia Emergency",
        subtitle: "One-tap emergency contacts:",
        police: "Police (0199877615)",
        hospital: "Ambulance (999/112)",
        fire: "Firefighters (994)",
        voiceBtn: "ğŸ¤ Voice Command",
        note: "âš ï¸ Malaysia emergency: Police (0199877615) | Ambulance (999/112) | Fire (994)"
    },
    ms: { // Bahasa Melayu
        title: "ğŸ†˜ ICE - Kecemasan Malaysia",
        subtitle: "Hubungan kecemasan satu tekan:",
        police: "Polis (0199877615)",
        hospital: "Ambulans (999/112)",
        fire: "Bomba (994)",
        voiceBtn: "ğŸ¤ Arahan Suara",
        note: "âš ï¸ Nombor kecemasan: Polis (0199877615) | Ambulans (999/112) | Bomba (994)"
    },
    zh: { // Mandarin
        title: "ğŸ†˜ ICE - é©¬æ¥è¥¿äºšç´§æ€¥æ•‘æ´",
        subtitle: "ä¸€é”®ç´§æ€¥è”ç³»:",
        police: "è­¦å¯Ÿ (0199877615)",
        hospital: "æ•‘æŠ¤è½¦ (999/112)",
        fire: "æ¶ˆé˜²é˜Ÿ (994)",
        voiceBtn: "ğŸ¤ è¯­éŸ³æŒ‡ä»¤",
        note: "âš ï¸ ç´§æ€¥å·ç : è­¦å¯Ÿ (0199877615) | æ•‘æŠ¤è½¦ (999/112) | æ¶ˆé˜² (994)"
    }
};

// Set default language to Malay
setLanguage('ms');

// Malaysia emergency numbers (hardcoded)
const emergencyNumbers = {
    police: "0199877615",
    ambulance: "999", // or 112
    fire: "994"
};

// Apply numbers to buttons
document.getElementById("police-btn").href = `tel:${emergencyNumbers.police}`;
document.getElementById("hospital-btn").href = `tel:${emergencyNumbers.ambulance}`;
document.getElementById("fire-btn").href = `tel:${emergencyNumbers.fire}`;

// Language selector
document.getElementById("language-selector").innerHTML = `
    <option value="ms">Bahasa Melayu</option>
    <option value="en">English</option>
    <option value="zh">ä¸­æ–‡</option>
`;

// Voice Command (Supports all 3 languages)
recognition.onresult = (event) => {
    const command = event.results[0][0].transcript.toLowerCase();
    
    // Police commands
    if (command.includes("police") || command.includes("polis") || command.includes("è­¦å¯Ÿ")) {
        window.location.href = `tel:${emergencyNumbers.police}`;
    } 
    // Ambulance commands
    else if (command.includes("hospital") || command.includes("ambulans") || command.includes("æ•‘æŠ¤è½¦")) {
        window.location.href = `tel:${emergencyNumbers.ambulance}`;
    } 
    // Fire commands
    else if (command.includes("fire") || command.includes("bomba") || command.includes("æ¶ˆé˜²")) {
        window.location.href = `tel:${emergencyNumbers.fire}`;
    }
};